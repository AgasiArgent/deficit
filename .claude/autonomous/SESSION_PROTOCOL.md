# Session Protocol

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û: –í—ã–ø–æ–ª–Ω–∏ —ç—Ç–æ—Ç —á–µ–∫–ª–∏—Å—Ç –≤ –ù–ê–ß–ê–õ–ï –ö–ê–ñ–î–û–ô —Å–µ—Å—Å–∏–∏.**

---

## –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã

–ü—Ä–æ–π–¥–∏ —ç—Ç–∏ —à–∞–≥–∏ **—Å—Ç—Ä–æ–≥–æ –ø–æ –ø–æ—Ä—è–¥–∫—É**:

### 1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å –ª–æ–∫–∞—Ü–∏—é
```bash
pwd
```
–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `/Users/andreynovikov/workspace/tech/internal-tools/deficit`

–ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø–µ—Ä–µ–π–¥–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.

---

### 2. üìñ –ü—Ä–æ—á–∏—Ç–∞–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é (–ø–µ—Ä–≤–∞—è —Å–µ—Å—Å–∏—è –∏–ª–∏ –µ—Å–ª–∏ –Ω–µ—è—Å–Ω–æ)
```bash
cat .claude/autonomous/app_spec.xml
```
–û—Å–≤–µ–∂–∏ –≤ –ø–∞–º—è—Ç–∏:
- –°—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î (—Ç–∞–±–ª–∏—Ü–∞ measurements)
- –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (/start, /add, /graph, /delete)
- Conversation flow –¥–ª—è –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö
- –§–æ—Ä–º–∞—Ç –≥—Ä–∞—Ñ–∏–∫–æ–≤

---

### 3. üìú –ü—Ä–æ—á–∏—Ç–∞–π –ø—Ä–æ–≥—Ä–µ—Å—Å
```bash
tail -50 .claude/autonomous/claude-progress.txt
```
–£–∑–Ω–∞–π:
- –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ?
- –ë—ã–ª–∏ –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã?
- –ï—Å—Ç—å –ª–∏ –∑–∞–º–µ—Ç–∫–∏ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–µ—Å—Å–∏–∏?

---

### 4. üîç –ü—Ä–æ–≤–µ—Ä—å git —Å—Ç–∞—Ç—É—Å
```bash
git log --oneline -5
git status
```
–ü–æ–Ω—è—Ç—å:
- –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã?
- –ï—Å—Ç—å –ª–∏ –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è?

---

### 5. üìã –ò–∑—É—á–∏ features.json
```bash
cat .claude/autonomous/features.json
```
–ù–∞–π–¥–∏:
- –ö–∞–∫–∏–µ —Ñ–∏—á–∏ —É–∂–µ –ø—Ä–æ–π–¥–µ–Ω—ã (`passes: true`)?
- –ö–∞–∫–∏–µ –≤ —Ä–∞–±–æ—Ç–µ (`in_progress: true`)?
- **–ö–∞–∫–∞—è —Å–ª–µ–¥—É—é—â–∞—è —Ñ–∏—á–∞?** (–ø–µ—Ä–≤–∞—è –≥–¥–µ `passes: false` –∏ `in_progress: false`)

---

### 6. üéØ –û—Ç–º–µ—Ç—å —Ñ–∏—á—É –≤ —Ä–∞–±–æ—Ç–µ

–û–±–Ω–æ–≤–∏ `features.json`:
- –ù–∞–π–¥–∏ —Å–ª–µ–¥—É—é—â—É—é —Ñ–∏—á—É (–∏–∑ —à–∞–≥–∞ 5)
- –£—Å—Ç–∞–Ω–æ–≤–∏ `in_progress: true`
- –£—Å—Ç–∞–Ω–æ–≤–∏ `started_at: [—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞-–≤—Ä–µ–º—è]`

---

### 7. üöÄ –ó–∞–ø—É—Å—Ç–∏ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
./.claude/autonomous/init.sh
```
–ü—Ä–æ–≤–µ—Ä—å:
- venv —Å–æ–∑–¥–∞–Ω –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω
- requirements —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–µ—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π —Å TELEGRAM_BOT_TOKEN)

---

### 8. ü©∫ Health check

–ï—Å–ª–∏ –±–æ—Ç —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–µ—Å—Ç—å `src/main.py`):
```bash
python -c "from src.database.models import init_db; init_db(); print('‚úÖ –ë–î OK')"
```

–ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–ø—É—Å—Ç–∏ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –Ω–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö).

---

## –í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã

### –†–∞–±–æ—Ç–∞ –Ω–∞–¥ —Ñ–∏—á–µ–π

- –†–∞–±–æ—Ç–∞–π –Ω–∞–¥ **–û–î–ù–û–ô —Ñ–∏—á–µ–π** –∑–∞ —Ä–∞–∑
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —Å–≤–µ—Ä—è–π—Å—è —Å `app_spec.xml`:
  - –ü–æ–ª—è –ë–î
  - –ö–æ–º–∞–Ω–¥—ã –∏ –∏—Ö –ø–æ–≤–µ–¥–µ–Ω–∏–µ
  - UI/UX —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ü–∏—à–∏ –∫–æ–¥ **–Ω–µ–±–æ–ª—å—à–∏–º–∏ –ø–æ—Ä—Ü–∏—è–º–∏**
- –¢–µ—Å—Ç–∏—Ä—É–π –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–Ω–∞—á–∏–º–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```bash
python src/main.py
```
–û—Ç–∫—Ä–æ–π Telegram –∏ –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.

–ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ ‚Äî —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –±–æ—Ç–∞.

### –ö–æ–º–º–∏—Ç—ã

–î–µ–ª–∞–π –∫–æ–º–º–∏—Ç –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –±–ª–æ–∫–∞:
```bash
git add .
git commit -m "–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–∏—á–∞: [–Ω–∞–∑–≤–∞–Ω–∏–µ]"
```

---

## –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ñ–∏—á–∏

### 1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∏—á–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é –≤ Telegram
- –£–±–µ–¥–∏—Å—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

### 2. üìù –û–±–Ω–æ–≤–∏ features.json

–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π —Ñ–∏—á–∏ —É—Å—Ç–∞–Ω–æ–≤–∏:
```json
{
  "passes": true,
  "in_progress": false,
  "completed_at": "[—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞-–≤—Ä–µ–º—è ISO 8601]"
}
```

### 3. üìÑ –ó–∞–ø–∏—à–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å

–î–æ–±–∞–≤—å –∑–∞–ø–∏—Å—å –≤ `claude-progress.txt`:
```
---
[TIMESTAMP]
Session #[N]

Completed feature: [–Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏—á–∏]
- [—á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ]
- [—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏]
- [–ø—Ä–æ–±–ª–µ–º—ã –µ—Å–ª–∏ –±—ã–ª–∏]

Next: [–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏—á–∏]
```

### 4. üíæ –ó–∞–∫–æ–º–º–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git add .
git commit -m "Feature complete: [–Ω–∞–∑–≤–∞–Ω–∏–µ]

- [–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π]
- Updated features.json"
```

---

## –ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª

### –ü–æ—Å–ª–µ 5 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫:

1. –ó–∞–ø–∏—à–∏ –ø—Ä–æ–±–ª–µ–º—É –≤ `claude-progress.txt`:
   ```
   BLOCKED: [–Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏—á–∏]
   Problem: [–æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã]
   Attempts: 5
   ```

2. –£—Å—Ç–∞–Ω–æ–≤–∏ –≤ `features.json`:
   ```json
   {
     "in_progress": false,
     "notes": "BLOCKED: [–ø—Ä–∏—á–∏–Ω–∞]"
   }
   ```

3. –ü–µ—Ä–µ—Ö–æ–¥–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏—á–µ –ò–õ–ò –æ—Å—Ç–∞–Ω–æ–≤–∏ —Å–µ—Å—Å–∏—é gracefully.

---

## –ö–æ–≥–¥–∞ –≤—Å–µ —Ñ–∏—á–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã

1. –ó–∞–ø—É—Å—Ç–∏ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
   - –ü—Ä–æ–≤–µ—Ä—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã (/start, /add, /graph, /delete)
   - –ü—Ä–æ–≤–µ—Ä—å conversation flow
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≥—Ä–∞—Ñ–∏–∫ —Å—Ç—Ä–æ–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ (job –≤ APScheduler)

2. –û–±–Ω–æ–≤–∏ `features.json`:
   ```json
   {
     "completion_criteria": {
       "all_tests_pass": true,
       "all_commands_work": true,
       "graph_displays_correctly": true,
       "reminder_works": true
     }
   }
   ```

3. –ó–∞–ø–∏—à–∏ –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –≤ `claude-progress.txt`:
   ```
   ===================================
   PROJECT COMPLETE
   ===================================
   All 32 features implemented and tested.

   Summary:
   - [–∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ]

   What works:
   - [—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π]

   Known issues (if any):
   - [—Å–ø–∏—Å–æ–∫]

   Next steps for user:
   - –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
   - –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å: python src/main.py
   ```

4. Final commit:
   ```bash
   git add .
   git commit -m "Project complete: Telegram deficit tracker bot

   All features implemented and tested:
   - Data entry with conversation handler
   - Graph visualization with matplotlib
   - Daily reminders at 9:00 MSK
   - Record deletion

   Ready for deployment."
   ```

---

## –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã

- **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è:** `.claude/autonomous/app_spec.xml`
- **–°–ø–∏—Å–æ–∫ —Ñ–∏—á:** `.claude/autonomous/features.json`
- **–õ–æ–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:** `.claude/autonomous/claude-progress.txt`
- **–≠—Ç–æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª:** `.claude/autonomous/SESSION_PROTOCOL.md`

---

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
- –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–π —Å —á—Ç–µ–Ω–∏—è –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- –†–∞–±–æ—Ç–∞–π –Ω–∞–¥ –æ–¥–Ω–æ–π —Ñ–∏—á–µ–π –∑–∞ —Ä–∞–∑
- –û—Ç–º–µ—á–∞–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ `features.json` –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞–π health check
- –ö–æ–º–º–∏—Ç—å —á–∞—Å—Ç–æ

**–£–¥–∞—á–∏! üöÄ**
